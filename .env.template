# Docker Compose Environment Configuration Template
# Copy this file to .env in your worktree directory and customize values
#
# IMPORTANT: Each worktree MUST have unique values for:
# - COMPOSE_PROJECT_NAME
# - DB_PORT (if accessing DB externally)
# - WP_SITE_HOST
# - DB_NAME

# ============================================================================
# PROJECT ISOLATION (REQUIRED - MUST BE UNIQUE PER WORKTREE)
# ============================================================================

# Compose project name - prefixes all containers, networks, and volumes
# Format: notionwp_<worktree-name>
# Examples: notionwp_main, notionwp_feature_blocks, notionwp_fix_auth
COMPOSE_PROJECT_NAME=notionwp_main

# WordPress site hostname (uses localtest.me for automatic DNS resolution)
# Each worktree gets its own subdomain
# Examples: main.localtest.me, feature-blocks.localtest.me, fix-auth.localtest.me
WP_SITE_HOST=main.localtest.me

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database name (must be unique per worktree)
DB_NAME=wp_main

# Database table prefix (optional, for additional isolation)
WP_TABLE_PREFIX=wp_

# Database credentials (can be shared across worktrees)
DB_USER=wp
DB_PASSWORD=wp
DB_ROOT_PASSWORD=root

# Database volume strategy (NEW in Phase 5.8)
# SHARED (default): Database persists across all branches
#   - Notion tokens and WordPress settings preserved when switching branches
#   - Faster development workflow (no re-setup required)
#   - Use for: Normal feature development
DB_VOLUME_NAME=notionwp_shared_db
#
# ISOLATED: Each branch gets its own database
#   - Clean slate for testing fresh installations
#   - Use for: Testing migrations, clean install scenarios
# DB_VOLUME_NAME=${COMPOSE_PROJECT_NAME}_db_data

# External database port (optional, for DB client access)
# Only needed if you want to connect via TablePlus, Sequel Pro, etc.
# Must be unique per worktree if multiple are running concurrently
# Default: 3306 (comment out to disable external access)
# DB_PORT=3307

# ============================================================================
# WORDPRESS CONFIGURATION
# ============================================================================

# WordPress version (image tag)
# Options: php8.3-apache, php8.2-apache, php8.1-apache
WP_VERSION=php8.3-apache

# WP-CLI version (image tag)
WP_CLI_VERSION=php8.3

# WordPress debug settings
WP_DEBUG=1
WP_DEBUG_LOG=1
WP_DEBUG_DISPLAY=0

# ============================================================================
# WORDPRESS INSTALLATION (for make install)
# ============================================================================

# Site configuration
WP_TITLE="Notion Sync Dev"
WP_ADMIN_USER=admin
WP_ADMIN_PASSWORD=admin
WP_ADMIN_EMAIL=admin@example.com

# ============================================================================
# NOTES
# ============================================================================
#
# TRAEFIK ACCESS:
# - Your site will be available at: http://${WP_SITE_HOST}
# - Traefik dashboard: http://localhost:8080
#
# LOCALTEST.ME:
# - Automatically resolves *.localtest.me to 127.0.0.1
# - No /etc/hosts editing required
# - Works for any subdomain: foo.localtest.me, bar.localtest.me, etc.
#
# CONCURRENT WORKTREES:
# - Each worktree can run simultaneously without conflicts
# - Isolation via COMPOSE_PROJECT_NAME and WP_SITE_HOST
# - Shared Traefik instance routes traffic based on hostname
#
# VOLUMES:
# - Database data: ${DB_VOLUME_NAME} (default: notionwp_shared_db - SHARED ACROSS BRANCHES)
# - WordPress files: ${COMPOSE_PROJECT_NAME}_wp_data (isolated per branch)
# - Plugin source: mounted from worktree directory
#
# NEW IN PHASE 5.8: Database volume is now shared by default
# This preserves Notion tokens and WordPress settings across branches
# Override DB_VOLUME_NAME in .env for isolated testing
