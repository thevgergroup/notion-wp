/**
 * Admin Styles for Notion Sync Settings Page
 *
 * Design Requirements:
 * - Matches WordPress admin design language
 * - WCAG 2.1 AA compliant
 * - Mobile responsive at 782px breakpoint
 * - Accessible focus states
 *
 * @package NotionSync
 */

/* =============================================================================
   Main Container
   ========================================================================== */

.notion-sync-settings {
	max-width: 800px;
	margin: 20px 0;

	/* Typography consistency with WordPress admin */
	font-size: 13px;
	line-height: 1.5;
}

/* =============================================================================
   Page Header
   ========================================================================== */

.notion-sync-header {
	margin-bottom: 20px;

	h1 {
		font-size: 23px;
		font-weight: 400;
		margin: 0;
		padding: 9px 0 4px;
		line-height: 1.3;
	}

	.subtitle {
		color: #646970;
		font-size: 14px;
		margin-top: 5px;
	}
}

/* =============================================================================
   Connection Form (Disconnected State)
   ========================================================================== */

.notion-sync-connection-form {
	background: #fff;
	border: 1px solid #c3c4c7;
	border-radius: 4px;
	padding: 20px;
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.04);

	.form-intro {
		margin-bottom: 20px;

		h2 {
			font-size: 16px;
			font-weight: 600;
			margin: 0 0 10px;
		}

		p {
			color: #50575e;
			margin: 0 0 10px;
		}

		a {
			color: #2271b1;
			text-decoration: none;

			&:hover,
			&:focus {
				color: #135e96;
				text-decoration: underline;
			}
		}
	}

	.form-field {
		margin-bottom: 20px;

		label {
			display: block;
			margin-bottom: 5px;
			font-weight: 600;
			color: #1d2327;
		}

		.description {
			display: block;
			margin-top: 5px;
			color: #646970;
			font-size: 13px;
			font-style: italic;
		}
	}

	.token-input {
		width: 100%;
		max-width: 600px;
		padding: 6px 8px;
		font-family: "Menlo", "Monaco", "Consolas", monospace;
		font-size: 12px;
		line-height: 1.5;
		border: 1px solid #8c8f94;
		border-radius: 4px;
		background: #fff;
		box-shadow: 0 0 0 transparent;
		transition: box-shadow 0.1s linear;

		&:focus {
			border-color: #2271b1;
			box-shadow: 0 0 0 1px #2271b1;
			outline: 2px solid transparent;
		}

		/* Ensure token is not accidentally revealed in screenshots */
		&[type="password"] {
			letter-spacing: 0.3em;
		}
	}

	.form-actions {
		margin-top: 20px;
		display: flex;
		align-items: center;
		gap: 12px;

		.button-primary {
			min-height: 32px;
			padding: 0 16px;
			font-size: 13px;
			line-height: 2.15384615;

			&:disabled {
				opacity: 0.6;
				cursor: not-allowed;
			}

			.spinner {
				float: none;
				margin: 0 8px 0 0;
			}
		}
	}
}

/* =============================================================================
   Workspace Info (Connected State)
   ========================================================================== */

.notion-sync-workspace-info {
	background: #fff;
	border: 1px solid #c3c4c7;
	border-left: 4px solid #00a32a; /* WordPress success green */
	border-radius: 4px;
	padding: 20px;
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.04);
	margin-bottom: 20px;

	.success-icon {
		color: #00a32a;
		font-size: 18px;
		margin-right: 8px;
		vertical-align: middle;

		&::before {
			content: "\2713"; /* Checkmark */
			font-weight: bold;
		}
	}

	.workspace-name {
		font-size: 16px;
		font-weight: 600;
		margin: 0 0 10px;
		display: inline-block;
	}

	.workspace-details {
		color: #50575e;
		margin-bottom: 15px;

		p {
			margin: 5px 0;
		}
	}

	.disconnect-button {
		color: #b32d2e; /* WordPress error red */
		border-color: #b32d2e;

		&:hover,
		&:focus {
			color: #b32d2e;
			border-color: #b32d2e;
			background: #fef0f0;
		}
	}
}

/* =============================================================================
   Pages List
   ========================================================================== */

.notion-sync-pages {
	background: #fff;
	border: 1px solid #c3c4c7;
	border-radius: 4px;
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.04);

	h2 {
		font-size: 16px;
		font-weight: 600;
		margin: 0;
		padding: 15px 20px;
		border-bottom: 1px solid #c3c4c7;
	}

	.pages-list {
		max-height: 400px;
		overflow-y: auto;
		padding: 0;
		margin: 0;

		&:empty::after {
			content: "No pages found. Make sure pages are shared with your integration.";
			display: block;
			padding: 20px;
			color: #646970;
			text-align: center;
			font-style: italic;
		}
	}

	.page-item {
		padding: 12px 20px;
		border-bottom: 1px solid #f0f0f1;
		display: flex;
		align-items: center;
		gap: 12px;

		&:last-child {
			border-bottom: none;
		}

		&:hover {
			background: #f6f7f7;
		}

		.page-icon {
			font-size: 18px;
			min-width: 24px;
			text-align: center;

			&.default-icon::before {
				content: "\1F4C4"; /* Document emoji */
			}
		}

		.page-info {
			flex: 1;
			min-width: 0; /* Allow text truncation */

			.page-title {
				font-weight: 600;
				color: #1d2327;
				margin: 0 0 3px;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}

			.page-meta {
				color: #646970;
				font-size: 12px;
			}
		}
	}
}

/* =============================================================================
   Loading States
   ========================================================================== */

.notion-sync-loading {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 40px;
	background: #fff;
	border: 1px solid #c3c4c7;
	border-radius: 4px;

	.spinner {
		float: none;
		margin-right: 10px;
	}

	.loading-text {
		color: #646970;
		font-size: 14px;
	}
}

/* WordPress spinner override for inline use */
.spinner.is-active {
	display: inline-block;
	visibility: visible;
}

/* =============================================================================
   Admin Notices
   ========================================================================== */

.notice.notion-sync-notice {
	margin: 20px 0;

	p {
		margin: 0.5em 0;
	}

	code {
		background: #f0f0f1;
		padding: 2px 6px;
		border-radius: 3px;
		font-family: "Menlo", "Monaco", "Consolas", monospace;
		font-size: 12px;
	}
}

/* =============================================================================
   Accessibility Enhancements
   ========================================================================== */

/* High contrast focus indicators */
.notion-sync-settings a:focus,
.notion-sync-settings button:focus,
.notion-sync-settings input:focus,
.notion-sync-settings select:focus {
	outline: 2px solid #2271b1;
	outline-offset: 2px;
}

/* Screen reader only text */
.screen-reader-text {
	border: 0;
	clip: rect(1px, 1px, 1px, 1px);
	clip-path: inset(50%);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
	word-wrap: normal !important;
}

/* Skip to content link for keyboard users */
.skip-to-content:focus {
	clip: auto;
	clip-path: none;
	height: auto;
	width: auto;
	position: static;
}

/* =============================================================================
   Mobile Responsive (WordPress Admin Breakpoint)
   ========================================================================== */

@media screen and (max-width: 782px) {
	.notion-sync-settings {
		margin: 10px 0;
	}

	.notion-sync-connection-form,
	.notion-sync-workspace-info,
	.notion-sync-pages {
		padding: 15px;
	}

	.token-input {
		max-width: 100%;
		font-size: 16px; /* Prevent iOS zoom on focus */
	}

	.form-actions {
		flex-direction: column;
		align-items: stretch;

		.button-primary {
			width: 100%;
			min-height: 44px; /* Touch-friendly */
			font-size: 14px;
		}
	}

	.page-item {
		padding: 15px;

		.page-icon {
			font-size: 20px;
		}

		.page-info .page-title {
			font-size: 14px;
		}
	}

	.notion-sync-pages .pages-list {
		max-height: 300px;
	}
}

/* Extra small screens */
@media screen and (max-width: 480px) {
	.notion-sync-header h1 {
		font-size: 20px;
	}

	.page-item {
		flex-direction: column;
		align-items: flex-start;
		gap: 8px;

		.page-info {
			width: 100%;
		}
	}
}

/* =============================================================================
   Print Styles (for documentation/support)
   ========================================================================== */

@media print {
	.notion-sync-connection-form .token-input {
		/* Hide sensitive token when printing */
		filter: blur(8px);
	}

	.form-actions,
	.disconnect-button {
		display: none;
	}
}
